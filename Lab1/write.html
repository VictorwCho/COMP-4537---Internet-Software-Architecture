<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>


<body>
    <labbel>Stored At:</labbel>
    <div id=textArea>
        <!-- text boxes from the addTextBox() function goes here-->
    </div>
    <button id="addTextBox" onclick=addTextBox()>Add</button>
    <br>
    <button onclick=window.location.href='index.html'>Back</button>

    <script>
        //global variable to keep track of div numbers.
        total = 0;
        apples = true;

        /**
         * - addTextBox() function creates a div tag with an incremental number assigned to
         * a variable called total
         * - A button and textarea is then appended to the unique div
         * - An event listener is added to the remove button to delete the div
         * - total gets incremented accordingly
         * 
         * */
        arrayDiv = [];

        function TextBox(key, data)
        {
            this.key = key;
            this.data = data;

            let div = document.createElement("Div");
            div.id = total;
            
            this.txtbx = document.createElement("TextArea");

            this.btn = document.createElement("Button");
            this.btnName = document.createTextNode("Remove");
            this.btn.appendChild(this.btnName);

            
            div.appendChild(this.txtbx);
            div.appendChild(this.btn);

            textArea = document.getElementById("textArea");
            textArea.appendChild(div);

            this.btn.addEventListener('click', function()
            {
                div.remove();
                arrayDiv.pop(div);
                console.log(arrayDiv);
            });
            
        }

        function addTextBox()
        {
            arrayDiv.push(new TextBox(total, "Any"));
            total = total + 1;
            console.log(arrayDiv);
        }

        
        // function addTextBox()
        // {
        //     let div = document.createElement("Div");
        //     div.id = total;
        //     let inputTextArea = document.createElement("TextArea");
        //     let removeButton = document.createElement("Button");
        //     let buttonNameRemove = document.createTextNode("Remove");
        //     removeButton.addEventListener('click', function()
        //     {
        //         div.remove();
        //     });

        //     removeButton.appendChild(buttonNameRemove);
        //     div.appendChild(inputTextArea);
        //     div.appendChild(removeButton);
        //     document.getElementById('textArea').appendChild(div);
        //     total = total + 1;
        // }

        const msg_notSupported = "Sorry web Storage is not supported!";
        const msg_key = "hidden secret";
        const msg_written="A piece of data was written in local storage for they key:";
        if (typeof (Storage) == "undefined")
        {
            document.write(msg_notSupported);
            window.stop();
        }
        localStorage.setItem(msg_key, "2021");
        document.write(msg_written+key);
    </script>
    
</body>
</html>